{"remainingRequest":"/Applications/lg_web/mpa/node_modules/thread-loader/dist/cjs.js!/Applications/lg_web/mpa/node_modules/babel-loader/lib/index.js!/Applications/lg_web/mpa/src/axios.js","dependencies":[{"path":"/Applications/lg_web/mpa/src/axios.js","mtime":1563786210566},{"path":"/Applications/lg_web/mpa/node_modules/cache-loader/dist/cjs.js","mtime":1561083984975},{"path":"/Applications/lg_web/mpa/node_modules/thread-loader/dist/cjs.js","mtime":1561083989993},{"path":"/Applications/lg_web/mpa/node_modules/babel-loader/lib/index.js","mtime":1561083931133}],"contextDependencies":[],"result":["'use strict';\n\nimport axios from 'axios';\nimport qs from 'qs'; //qs组件来避开ajax信使请求，并兼容Android。\n\nimport Vue from 'vue'; // import router from './router'\n\nvar vm = new Vue({// router\n}); // console.log(router)\n\n/**\n * http请求拦截器\n */\n\naxios.interceptors.request.use(function (config) {\n  if (vm.cookie.get(\"xianyu_token\")) {\n    // 判断是否存在token，如果存在的话，则每个http请求的header都加上token,username\n    config.headers.Authorization = \"Token \".concat(vm.cookie.get(\"xianyu_token\"));\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  vm.$message.error(error);\n});\n\nfunction checkStatus(response) {\n  if (response && response.status === 200) {\n    return response; //拿到接口请求成功并且登录成功后的请求结果\n    // 如果不需要除了data之外的数据，可以直接 return response.data\n  } else {\n      return response; //网络错误，服务器错误，未登录成功\n    }\n}\n\nfunction checkCode(res) {\n  /**\n   * 如果code异常(这里已经包括网络错误，服务器错误，后端抛出的错误)，可以弹出一个错误提示，告诉用户\n   */\n  // vm.$message.error(\"亲，您的网络出了一点小状况喔!\");\n  if (!res) {\n    vm.$message.error(\"亲，您的网络出了一点小状况喔!\"); //接口请求不到报错\n  } else if (res.data.code !== 200) {\n    //接口异常错误\n    if (res.data.code === 404.666) {\n      //先判断是否处于登录状态\n      window.location.href = \"/after.html#/login\";\n    } else {\n      if (res.data.result === '暂无 /api/account/permission/info/ 接口的访问权限。') {\n        vm.$notify({\n          title: '警告',\n          message: '请联系管理员配置权限 ',\n          type: 'warning',\n          duration: '10000',\n          onClose: function onClose() {\n            window.location.href = \"/after.html#/login\";\n            this.$notify.close();\n            this.$message.close();\n          }\n        });\n      } else {\n        vm.$message.warning(res.data.result);\n      } //直接返回错误\n\n    }\n  } else {\n    return res;\n  }\n}\n\nexport default {\n  post: function post(url, data) {\n    return axios({\n      method: 'post',\n      baseURL: '/',\n      url: url,\n      data: qs.stringify(data),\n      timeout: 100000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n      }\n    }).then(function (response) {\n      return checkStatus(response);\n    }).then(function (res) {\n      return checkCode(res);\n    });\n  },\n  get: function get(url, params) {\n    return axios({\n      method: 'get',\n      baseURL: '/',\n      url: url,\n      params: params,\n      // get 请求时带的参数\n      timeout: 100000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n      }\n    }).then(function (response) {\n      return checkStatus(response);\n    }).then(function (res) {\n      return checkCode(res);\n    });\n  }\n};",null]}