{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-008126fe\"],{\"1e73\":function(e,t,i){\"use strict\";i(\"ac6a\"),i(\"96cf\");var a,r,s=i(\"3b8d\"),n=(Object,Object,Object,r=Object(s.a)(regeneratorRuntime.mark(function e(){var t,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).fileList=[],t.imagesList=[],i={unit_id:t.info.id},e.next=6,t.http.get(t.api.archivesProjectImageList,i);case 6:if(a=e.sent,t.loading=!1,a){e.next=10;break}return e.abrupt(\"return\");case 10:200===(r=a.data).code&&r.ret.forEach(function(e){t.fileList.push({url:\"http://\".concat(e.path),id:e.id}),t.imagesList.push({url:\"http://\".concat(e.path),id:e.id})});case 12:case\"end\":return e.stop()}},e,this)})),a=Object(s.a)(regeneratorRuntime.mark(function e(){var t,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],(t=this).imagesList.forEach(function(e){i.push(e.id)}),a={data:JSON.stringify({image_list:i,unit_id:t.info.id})},e.next=6,t.http.get(t.api.archivesProjectImageCreate,a);case 6:if(r=e.sent,t.loading=!1,r){e.next=10;break}return e.abrupt(\"return\");case 10:200===r.data.code&&(t.ruleForm.id?t.$message.success(\"修改成功！\"):t.$message.success(\"添加成功！\"),t.isTypeDialog.show=!1);case 12:case\"end\":return e.stop()}},e,this)})),{components:{},props:{isTypeDialog:Object,ruleForm:Object,info:Object},data:function(){return{rules:{name:[{required:!0,message:\"不能为空！\",trigger:\"blur\"}],code:[{required:!0,message:\"不能为空！\",trigger:\"blur\"}]},defaultProps:{key:\"id\",label:\"name\"},title:\"业务信息配置\",dialogDeVisible:!1,dialogEnVisible:!1,dialogImageUrl:\"\",dialogVisible:!1,fileList:[],imagesList:[]}},mounted:function(){this.fetchList()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.fetchArchivesPanoTypeEdit()})},fetchList:function(){var e=Object(s.a)(regeneratorRuntime.mark(function e(){var t,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).fileList=[],t.imagesList=[],i={unit_id:t.info.id},e.next=6,t.http.get(t.api.archivesProjectImageList,i);case 6:if(a=e.sent,t.loading=!1,a){e.next=10;break}return e.abrupt(\"return\");case 10:200===(r=a.data).code&&r.ret.forEach(function(e){t.fileList.push({url:\"http://\".concat(e.path),id:e.id}),t.imagesList.push({url:\"http://\".concat(e.path),id:e.id})});case 12:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchArchivesPanoTypeEdit:function(){var e=Object(s.a)(regeneratorRuntime.mark(function e(){var t,i,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],(t=this).imagesList.forEach(function(e){i.push(e.id)}),a={data:JSON.stringify({image_list:i,unit_id:t.info.id})},e.next=6,t.http.get(t.api.archivesProjectImageCreate,a);case 6:if(r=e.sent,t.loading=!1,r){e.next=10;break}return e.abrupt(\"return\");case 10:200===r.data.code&&(t.ruleForm.id?t.$message.success(\"修改成功！\"):t.$message.success(\"添加成功！\"),t.isTypeDialog.show=!1);case 12:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleClose:function(){this.isTypeDialog.show=!1},handleRemove:function(e,t){var i=this;i.imagesList.forEach(function(t,a){e.id===t.id&&(i.imagesList.splice(a,1),i.fileList.splice(a,1))})},beforeAvatarUpload:function(e){var t=\"image/jpeg\"===e.type||\"image/png\"===e.type,i=e.size/1024/1024<2;return t||this.$message.error(\"上传头像图片只能是 JPG/PNG 格式!\"),i||this.$message.error(\"上传头像图片大小不能超过 2MB!\"),t&&i},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleAvatarSuccess:function(e,t,i){this.imagesList.push({url:\"http://\".concat(e.ret.path),id:e.ret.id})},handleProgress:function(e,t,i){}}}),o=i(\"2455\");var c=function(e){i(\"4c8d\")},l=Object(o.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",[i(\"el-dialog\",{staticClass:\"general__dialog tree-group-modal\",attrs:{title:e.title,visible:e.isTypeDialog.show,width:\"600px\",\"before-close\":e.handleClose},on:{\"update:visible\":function(t){return e.$set(e.isTypeDialog,\"show\",t)}}},[i(\"el-form\",{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.ruleForm,rules:e.rules,\"label-width\":\"150px\",size:\"small\"}},[i(\"el-upload\",{attrs:{action:e.api.archivesFileUpload,\"list-type\":\"picture-card\",\"on-preview\":e.handlePictureCardPreview,\"file-list\":e.fileList,\"on-remove\":e.handleRemove,\"on-change\":e.handleProgress,\"on-success\":e.handleAvatarSuccess,\"before-upload\":e.beforeAvatarUpload}},[i(\"i\",{staticClass:\"el-icon-plus\"})]),e._v(\" \"),i(\"el-dialog\",{attrs:{visible:e.dialogVisible},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[i(\"img\",{attrs:{width:\"100%\",src:e.dialogImageUrl,alt:\"\"}})])],1),e._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:function(t){return e.submitForm(\"ruleForm\")}}},[e._v(\"提交\")]),e._v(\" \"),i(\"el-button\",{attrs:{size:\"small\"},on:{click:e.handleClose}},[e._v(\"取消\")])],1)],1)],1)},[],!1,c,\"data-v-1a266de8\",null);t.a=l.exports},\"4c8d\":function(e,t,i){var a=i(\"5ead\");\"string\"==typeof a&&(a=[[e.i,a,\"\"]]),a.locals&&(e.exports=a.locals);(0,i(\"499e\").default)(\"04da63ce\",a,!0,{})},\"5ead\":function(e,t,i){(e.exports=i(\"2350\")(!1)).push([e.i,\"\\n.avatar-uploader .el-upload[data-v-1a266de8] {\\n  border: 1px dashed #d9d9d9;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  position: relative;\\n  overflow: hidden;\\n}\\n.avatar-uploader .el-upload[data-v-1a266de8]:hover {\\n  border-color: #409EFF;\\n}\\n.avatar-uploader-icon[data-v-1a266de8] {\\n  font-size: 28px;\\n  color: #8c939d;\\n  width: 100px;\\n  height: 100px;\\n  line-height: 100px;\\n  text-align: center;\\n}\\n.avatar[data-v-1a266de8] {\\n  width: 100px;\\n  height: 100px;\\n  display: block;\\n}\\n\",\"\"])}}]);","extractedComments":[]}